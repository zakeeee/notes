# 53.表示数值的字符串

**题目描述**

请实现一个函数用来判断字符串是否表示数值（包括整数和小数）。例如，字符串"+100","5e2","-123","3.1416"和"-1E-16"都表示数值。 但是"12e","1a3.14","1.2.3","+-5"和"12e+4.3"都不是。

**解答**

用一个状态转移矩阵，每遍历一个字符，如果能够跳转，跳转到下一个状态行。

```java
public class Solution {
    public boolean isNumeric(char[] str) {
        if (str.length == 0) return false;
        char[] tmp = "+-d.de+-d".toCharArray();

        // 横轴是下一个可选状态，竖轴是当前状态
        int[][] turn = new int[][]{
           //+  -  d  .  d  e  +  -  d
            {1, 1, 1, 0, 0, 0, 0, 0, 0},  // # 初始状态
            {0, 0, 1, 1, 0, 0, 0, 0, 0},  // +
            {0, 0, 1, 1, 0, 0, 0, 0, 0},  // -
            {0, 0, 1, 1, 0, 1, 0, 0, 0},  // d
            {0, 0, 0, 0, 1, 0, 0, 0, 0},  // .
            {0, 0, 0, 0, 1, 1, 0, 0, 0},  // d
            {0, 0, 0, 0, 0, 0, 1, 1, 1},  // e
            {0, 0, 0, 0, 0, 0, 0, 0, 1},  // +
            {0, 0, 0, 0, 0, 0, 0, 0, 1},  // -
            {0, 0, 0, 0, 0, 0, 0, 0, 1},  // d
        };

        int cur = 0;  // 表示当前在状态矩阵的第几行
        for (char ch : str) {
            int i;
            for (i = 0; i < tmp.length; i++) {
                char c = tmp[i];
                if (turn[cur][i] == 0) continue;  // 不能跳转，直接跳过这个

                // 如果字符相同，或者是数字字符，或者是 E，跳转到下一个状态行
                if (ch == c
                    || (c == 'd' && ch - '0' >= 0 && ch - '0' <= 9)
                    || (c == 'e' && ch == 'E')) {
                    cur = i + 1;
                    break;
                }
            }

            // 如果没能够跳转，说明符合要求
            if (i == tmp.length) return false;
        }

        // 最终状态只有四种情况，就是在第 3、4、5、9 行中的任意一行
        return cur == 3 || cur == 4 || cur == 5 || cur == 9;
    }
}
```